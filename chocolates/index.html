<!doctype html><html lang=es-mx>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge,chrome=1">
<title>Solución a "Los Chocolates del Agente Nieves" | omegaUp blog</title>
<meta name=viewport content="width=device-width,minimum-scale=1">
<meta name=description content="Problema: Los Chocolates del Agente Nieves
En este problema tenemos un tubo de chocolates los cuales se van a vender uno cada día, pudiendo vender únicamente los que están en ese momento en los extremos. El precio por vender un chocolate es igual al precio base de chocolate multiplicado por el número de días que se han vendido chocolates (empezando en 1).
El objetivo es encontrar la mayor ganancia posible al vender todos los chocolates.">
<meta name=generator content="Hugo 0.92.0">
<meta name=ROBOTS content="NOINDEX, NOFOLLOW">
<link rel=stylesheet href=/ananke/css/main.min.css>
<link rel=stylesheet href="https://fonts.googleapis.com/css?family=Libre+Franklin%3A300%2C300i%2C400%2C400i%2C600%2C600i%2C800%2C800i&amp;#038;subset=latin%2Clatin-ext">
<link rel=stylesheet href=/css/styles.css>
<meta property="og:title" content="Solución a &#34;Los Chocolates del Agente Nieves&#34;">
<meta property="og:description" content="Problema: Los Chocolates del Agente Nieves
En este problema tenemos un tubo de chocolates los cuales se van a vender uno cada día, pudiendo vender únicamente los que están en ese momento en los extremos. El precio por vender un chocolate es igual al precio base de chocolate multiplicado por el número de días que se han vendido chocolates (empezando en 1).
El objetivo es encontrar la mayor ganancia posible al vender todos los chocolates.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://blogv2.omegaup.com/chocolates/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2015-08-05T07:02:46+00:00">
<meta property="article:modified_time" content="2015-08-05T07:02:46+00:00">
<meta itemprop=name content="Solución a &#34;Los Chocolates del Agente Nieves&#34;">
<meta itemprop=description content="Problema: Los Chocolates del Agente Nieves
En este problema tenemos un tubo de chocolates los cuales se van a vender uno cada día, pudiendo vender únicamente los que están en ese momento en los extremos. El precio por vender un chocolate es igual al precio base de chocolate multiplicado por el número de días que se han vendido chocolates (empezando en 1).
El objetivo es encontrar la mayor ganancia posible al vender todos los chocolates."><meta itemprop=datePublished content="2015-08-05T07:02:46+00:00">
<meta itemprop=dateModified content="2015-08-05T07:02:46+00:00">
<meta itemprop=wordCount content="902">
<meta itemprop=keywords content="dinámica,felix,Material de estudio,preselectivo,solución,"><meta name=twitter:card content="summary">
<meta name=twitter:title content="Solución a &#34;Los Chocolates del Agente Nieves&#34;">
<meta name=twitter:description content="Problema: Los Chocolates del Agente Nieves
En este problema tenemos un tubo de chocolates los cuales se van a vender uno cada día, pudiendo vender únicamente los que están en ese momento en los extremos. El precio por vender un chocolate es igual al precio base de chocolate multiplicado por el número de días que se han vendido chocolates (empezando en 1).
El objetivo es encontrar la mayor ganancia posible al vender todos los chocolates.">
</head>
<body class="ma0 bg-near-white">
<header class=bg-top style=background-image:url(https://blogv2.omegaup.com/images/cover.jpeg)>
<div class="pv3 bg-black-60">
<nav class="pv4 ph3 ph4-ns" role=navigation>
<div class="mw8 center">
<h1>
<a href=/ class="hover-white no-underline white-90 dib">
omegaUp blog
</a>
</h1>
<h2>Incrementando el talento de Ingeniería de Software en América Latina</h2>
<div class="flex-l justify-between items-center center">
<div class="flex-l items-center">
<div class=ananke-socials>
</div>
</div>
</div>
</div>
</nav>
</div>
</header>
<header class="bg-black-90 sticky w-100 ph3 pv3 pv4-ns ph4-m ph5-l">
<nav class="f6 fw6 ttu tracked">
<a class="link dim white dib mr3" href=/ title=Inicio>Inicio</a>
<a class="link dim white dib mr3" href=/search/ title=Búsqueda>Búsqueda</a>
<a class="link dim white dib" href=https://omegaup.org/ title="Acerca de">Acerca de</a>
</nav>
</header>
<main class=pb7 role=main>
<article class="flex-l flex-wrap justify-between mw8 center ph3">
<header class="mt4 w-100">
<aside class="instapaper_ignoref b helvetica tracked">
POSTS
</aside>
<div id=sharing class="mt3 ananke-socials">
</div>
<p class="tracked p0 mb0">
<time class="f6 dib tracked" datetime=2015-08-05T07:02:46Z>August 5, 2015</time>
Por <strong>
darknut
</strong>
</p>
<h1 class="f2 pv2 mv1">Solución a "Los Chocolates del Agente Nieves"</h1>
</header>
<div class="nested-copy-line-height lh-copy sans-serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p>Problema: <a href=https://omegaup.com/arena/problem/chocolates>Los Chocolates del Agente Nieves</a></p>
<p>En este problema tenemos un tubo de chocolates los cuales se van a vender uno cada día, pudiendo vender únicamente los que están en ese momento en los extremos. El precio por vender un chocolate es igual al precio base de chocolate multiplicado por el número de días que se han vendido chocolates (empezando en 1).</p>
<p>El objetivo es encontrar la mayor ganancia posible al vender todos los chocolates.</p>
<p>Si lo quisiéramos resolver como una búsqueda, ¿qué tendríamos que considerar? En una búsqueda, nos importa obtener dos cosas, el espacio de búsqueda (es decir, cómo estará representado nuestro estado y qué valores puede tener), y las operaciones en nuestra búsqueda.</p>
<p>En cuanto a nuestros estados en la búsqueda, nos importa saber qué chocolates aún tenemos disponibles y cuántos días han pasado. Podríamos empezar teniendo N valores booleanos por cada chocolate y un número para saber cuántos días han pasado, por ejemplo, si tenemos 3 chocolates y aún no vendemos nada, tendríamos el estado (1, 1, 1, 1), si ya vendimos el primer chocolate, tendríamos (0, 1, 1, 2), si vendimos el tercer chocolate tendríamos (1, 1, 0, 2) y si vendemos los chocolates 1 y 2, tendríamos (0, 0, 1, 3). Sin embargo, esta representación es un poco inútil, ya que en el peor de los casos, tendríamos 1000 chocolates, lo cual hace un estado de 1000 posibles valores.</p>
<p>Podemos mejorar esto solo guardando únicamente los índices a los extremos del tubo, ya que ya sabemos que aún tenemos todos los chocolates entre estos dos valores. Eso transforma los estados anteriores a los siguientes estados respectivamente: (1, 3, 1), (2, 3, 2), (1, 2, 2). y (3, 3, 3). Esto vuelve al estado muchísimo más manejable, pues cada valor puede valer únicamente entre 1 y 1000.</p>
<p>Ya que tenemos nuestro estado, definimos las operaciones que hay que hacer para ir entre estado y estado, y estas operaciones son únicamente 2, vender el chocolate de la izquierda, o vender el chocolate de la derecha, si estamos en el estado (1, 3, 1) y vendemos el de la izquierda, nos lleva al estado (2, 3, 2), y si vendemos el de la derecha, nos lleva al estado (1, 2, 2). Podemos continuar estas instrucciones recursivamente sobre los estados que resulta y generar un árbol de búsqueda:</p>
<p><img src=http://i.imgur.com/SXmtBPI.png alt></p>
<p>Una vez teniendo el árbol de búsqueda, podemos proceder a darle valor a cada uno de los nodos. Del nodo inicial (1, 3, 1), si decides vender el chocolate de la izquierda, obtendrás una ganancia igual a lo que te de el nodo (2, 3, 2) más el precio del chocolate 1 multiplicado por el número de días, que en este caso es 1, y si decides vender el chocolate de la derecha, la ganancia será lo que de el nodo (1, 2, 2) más el precio del chocolate 3 (múltiplicado por 1). De las dos opciones, tomaremos el máximo.</p>
<p>Llenemos ahora el resto del árbol de búsqueda con estos datos:</p>
<p><img src=http://i.imgur.com/HseaiuL.png alt></p>
<p>De aquí podemos ver dos cosas, la primera es que los nodos de hasta abajo, que son nuestros nodos hoja, tienen el mismo valor en el chocolate izquierdo como en el derecho, por lo que el valor máximo que podemos obtener de ellos es el precio de ese único chocolate por el número de días que llevamos. Y la segunda cosa es que tenemos nodos repetidos, por lo que cuando hagamos nuestra búsqueda, necesitamos guardar cálculos que ya hayamos hecho para no calcular un mismo estado más de una vez.</p>
<p>Nuestro árbol de búsqueda ya está terminado, así que es hora de convertirlo a una función matemática. Nuestra función recibe como entrada un estado, en este caso el chocolate más a la izquierda que nos queda, el más a la derecha y el nivel en el que estamos, y dado lo que aprendimos de nuestro árbol de búsqueda, regresará el siguiente valor:</p>
<p><img src=http://i.imgur.com/s3XYfw9.png alt></p>
<p>Con esto, y considerando que debemos evitar repetir valores duplicados, es más que suficiente para resolver el problema con el método que más te guste, ya sea dinámica o memorización, aunque hay un pequeño problema para guardar los valores visitados.</p>
<p>Vamos a necesitar un arreglo de 1000 x 1000 x 1000 si es que queremos guardar un arreglo que se identifique de esta forma:</p>
<p>arreglo[izquierda][derecha][nivel]</p>
<p>Y esto es mucho más de lo que cabe en memoria, por lo que tenemos que encontrar una forma de reducir la memoria que necesitamos.</p>
<p>Lo que nos tenemos que dar cuenta es que la variable nivel es innecesaria, pues puede calcularse utilizando el número de chocolates que nos quedan en el tubo y el número de chocolates que teníamos originalmente:</p>
<p>nivel = total - chocolates_en_el_tubo + 1</p>
<p>Y para calcular el número de chocolates que nos quedan en el tubo solo se necesitan el índice del chocolate más a la izquierda, y más a la derecha, que ya tenemos en nuestro estado.</p>
<p>chocolates_en_el_tubo = derecha - izquierda + 1</p>
<p>Despejando:</p>
<p>nivel = total - derecha + izquierda - 1 + 1</p>
<p>nivel = total - derecha + izquierda</p>
<p>De esta forma, podemos eliminar el nivel de todos nuestros estados y cambiar el valor de nivel de todas las fórmulas por el valor de arriba. Esto simplifica nuestro arreglo de visitados de 1000 x 1000 x 1000 a un arreglo de tan solo 1000 x 1000, lo cuál es suficiente en tiempo y memoria.</p>
<ul class=pa0>
<li class=list>
<a href=/tags/din%C3%A1mica class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">dinámica</a>
</li>
<li class=list>
<a href=/tags/felix class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">felix</a>
</li>
<li class=list>
<a href=/tags/material-de-estudio class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Material de estudio</a>
</li>
<li class=list>
<a href=/tags/preselectivo class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">preselectivo</a>
</li>
<li class=list>
<a href=/tags/soluci%C3%B3n class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">solución</a>
</li>
</ul>
<div class="mt6 instapaper_ignoref">
</div>
</div>
<aside class="w-30-l mt6-l">
<div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
<p class="f5 b mb3">Related</p>
<ul class="pa0 list">
<li class=mb2>
<a href=/solucion-a-temblor/>Solución a "Temblor"</a>
</li>
<li class=mb2>
<a href=/solucion-a-comesolo/>Solución a "Comesolo"</a>
</li>
<li class=mb2>
<a href=/solucion-a-el-collar-de-perlas/>Solución a "El collar de perlas"</a>
</li>
<li class=mb2>
<a href=/solucion-a-contrasena-binaria/>Solución a "Contraseña Binaria"</a>
</li>
<li class=mb2>
<a href=/solucion-a-poema-equino/>Solución a "Poema Equino"</a>
</li>
<li class=mb2>
<a href=/solucion-a-carretera/>Solución a "Carretera"</a>
</li>
<li class=mb2>
<a href=/solucion-a-quimicos/>Solución a "Químicos"</a>
</li>
<li class=mb2>
<a href=/solucion-a-crucero/>Solución a "Crucero"</a>
</li>
<li class=mb2>
<a href=/solucion-a-mocha-hojas/>Solución a "Mocha Hojas"</a>
</li>
<li class=mb2>
<a href=/solucion-alternativa-a-decepcion/>Solución alternativa a "Decepción"</a>
</li>
<li class=mb2>
<a href=/solucion-a-panoramas/>Solución a "Panoramas"</a>
</li>
<li class=mb2>
<a href=/solucion-a-mapas-de-bits/>Solución a "Mapas de bits"</a>
</li>
<li class=mb2>
<a href=/445/>Solución a "Pista"</a>
</li>
<li class=mb2>
<a href=/solucion-a-dp-generica/>Solución a "DP Genérica"</a>
</li>
<li class=mb2>
<a href=/solucion-a-coleccion/>Solución a "Colección"</a>
</li>
</ul>
</div>
</aside>
</article>
</main>
<footer class="bg-black bottom-0 w-100 pa3" role=contentinfo>
<div class="flex justify-between">
<a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://blogv2.omegaup.com/>
&copy; omegaUp blog 2022
</a>
<div>
<div class=ananke-socials>
</div></div>
</div>
</footer>
<script type=text/javascript async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type=text/x-mathjax-config>
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['$latex', '$'], ['\\(','\\)']],
      displayMath: [['$$','$$'], ['\[','\]']],
      processEscapes: true,
      processEnvironments: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      ignoreClass: 'gist',
      TeX: {
        equationNumbers: { autoNumber: "AMS" },
        extensions: ["AMSmath.js", "AMSsymbols.js"],
      },
   },
 });
</script>
</body>
</html>