<!doctype html><html lang=es-mx>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge,chrome=1">
<title>Solución a "Cueva" | omegaUp blog</title>
<meta name=viewport content="width=device-width,minimum-scale=1">
<meta name=description content="Concurso: Preselectivo para la IOI 2013, Etapa 1, Examen 4 Autor: Ethan Jiménez Vargas
Después de comprender el problema podemos deducir dos cosas:
 Los N puntos de la cueva modelan un árbol, esto debido a la propiedad de que existirán N-1 aristas y siempre hay un camino entre cualquier par de nodos. Podemos traducir la tarea principal del problema a lo siguiente “Para cada una de las Q preguntas, ¿el nodo A es un ancestro del nodo B?">
<meta name=generator content="Hugo 0.92.1">
<meta name=ROBOTS content="NOINDEX, NOFOLLOW">
<link rel=stylesheet href=/ananke/css/main.min.css>
<link rel=stylesheet href="https://fonts.googleapis.com/css?family=Libre+Franklin%3A300%2C300i%2C400%2C400i%2C600%2C600i%2C800%2C800i&amp;#038;subset=latin%2Clatin-ext">
<link rel=stylesheet href=/css/styles.css>
<meta property="og:title" content="Solución a &#34;Cueva&#34;">
<meta property="og:description" content="Concurso: Preselectivo para la IOI 2013, Etapa 1, Examen 4 Autor: Ethan Jiménez Vargas
Después de comprender el problema podemos deducir dos cosas:
 Los N puntos de la cueva modelan un árbol, esto debido a la propiedad de que existirán N-1 aristas y siempre hay un camino entre cualquier par de nodos. Podemos traducir la tarea principal del problema a lo siguiente “Para cada una de las Q preguntas, ¿el nodo A es un ancestro del nodo B?">
<meta property="og:type" content="article">
<meta property="og:url" content="https://blog.omegaup.com/solucion-a-cueva/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2013-01-14T16:27:54+00:00">
<meta property="article:modified_time" content="2013-01-14T16:27:54+00:00">
<meta itemprop=name content="Solución a &#34;Cueva&#34;">
<meta itemprop=description content="Concurso: Preselectivo para la IOI 2013, Etapa 1, Examen 4 Autor: Ethan Jiménez Vargas
Después de comprender el problema podemos deducir dos cosas:
 Los N puntos de la cueva modelan un árbol, esto debido a la propiedad de que existirán N-1 aristas y siempre hay un camino entre cualquier par de nodos. Podemos traducir la tarea principal del problema a lo siguiente “Para cada una de las Q preguntas, ¿el nodo A es un ancestro del nodo B?"><meta itemprop=datePublished content="2013-01-14T16:27:54+00:00">
<meta itemprop=dateModified content="2013-01-14T16:27:54+00:00">
<meta itemprop=wordCount content="759">
<meta itemprop=keywords content="Etapa 1,Ethan Jiménez,Examen 4,preselectivo,solución,Soluciones Preselectivo 2013,"><meta name=twitter:card content="summary">
<meta name=twitter:title content="Solución a &#34;Cueva&#34;">
<meta name=twitter:description content="Concurso: Preselectivo para la IOI 2013, Etapa 1, Examen 4 Autor: Ethan Jiménez Vargas
Después de comprender el problema podemos deducir dos cosas:
 Los N puntos de la cueva modelan un árbol, esto debido a la propiedad de que existirán N-1 aristas y siempre hay un camino entre cualquier par de nodos. Podemos traducir la tarea principal del problema a lo siguiente “Para cada una de las Q preguntas, ¿el nodo A es un ancestro del nodo B?">
</head>
<body class="ma0 bg-near-white">
<header class=bg-top style=background-image:url(https://blog.omegaup.com/images/cover.jpeg)>
<div class="pv3 bg-black-60">
<nav class="pv4 ph3 ph4-ns" role=navigation>
<div class="mw8 center">
<h1>
<a href=/ class="hover-white no-underline white-90 dib">
omegaUp blog
</a>
</h1>
<h2>Incrementando el talento de Ingeniería de Software en América Latina</h2>
<div class="flex-l justify-between items-center center">
<div class="flex-l items-center">
<div class=ananke-socials>
</div>
</div>
</div>
</div>
</nav>
</div>
</header>
<header class="bg-black-90 sticky w-100 ph3 pv3 pv4-ns ph4-m ph5-l z-1">
<nav class="f6 fw6 ttu tracked">
<a class="link dim white dib mr3" href=/ title=Inicio>Inicio</a>
<a class="link dim white dib mr3" href=/search/ title=Búsqueda>Búsqueda</a>
<a class="link dim white dib" href=https://omegaup.org/ title="Acerca de">Acerca de</a>
</nav>
</header>
<main class=pb7 role=main>
<article class="flex-l flex-wrap justify-between mw8 center ph3">
<header class="mt4 w-100">
<aside class="instapaper_ignoref b helvetica tracked">
POSTS
</aside>
<div id=sharing class="mt3 ananke-socials">
</div>
<p class="tracked p0 mb0">
<time class="f6 dib tracked" datetime=2013-01-14T16:27:54Z>January 14, 2013</time>
Por <strong>
Lira
</strong>
</p>
<h1 class="f2 pv2 mv1">Solución a "Cueva"</h1>
</header>
<div class="nested-copy-line-height lh-copy sans-serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p><strong>Concurso:</strong> <a href=https://omegaup.com/arena/IOI2013E1P4>Preselectivo para la IOI 2013, Etapa 1, Examen 4</a> <strong>Autor:</strong> <a href=http://twitter.com/erosethan>Ethan Jiménez Vargas</a></p>
<p>Después de comprender el problema podemos deducir dos cosas:</p>
<ul>
<li>Los <strong>N</strong> puntos de la cueva modelan un árbol, esto debido a la propiedad de que existirán <strong>N-1</strong> aristas y siempre hay un camino entre cualquier par de nodos.</li>
<li>Podemos traducir la tarea principal del problema a lo siguiente “Para cada una de las <strong>Q</strong> preguntas, ¿el nodo A es un ancestro del nodo <strong>B</strong>?”, de modo que necesitamos encontrar una manera óptima de saberlo.</li>
</ul>
<p><em><strong>Subtarea 1</strong></em>. Para obtener los primeros 25 puntos del problema solo necesitamos implementar el método de fuerza bruta que nos permita conocer si <strong>A</strong> es ancestro de <strong>B</strong>, esto puede conseguirse con una búsqueda en profundidad (DFS) que desde el nodo <strong>A</strong> encuentre la manera de llegar al nodo 1, restringiendo que no sea posible pasar por el nodo <strong>B</strong>, si existe un camino del nodo <strong>A</strong> al nodo raíz la respuesta es 1, en caso contrario la respuesta es 0. Hay que cuidar los casos especiales cuando el nodo B es el nodo raíz o cuando el nodo <strong>A</strong> es el mismo nodo <strong>B</strong>, en ambos casos la respuesta es 0.</p>
<p><em>Complejidad de la solución: <strong>O(NQ)</strong></em></p>
<p><strong><em>Subtarea 2.</em></strong> Es notable que esta vez el número de preguntas es mucho mayor, por ello la solución anterior tardaría demasiado. Cambiemos nuestra estrategia, esta vez realicemos una búsqueda en profundidad desde el nodo 1 hasta los demás <strong>N</strong> nodos, llevando una lista <strong>L</strong> de los nodos que forman parte del camino desde el nodo 1 hasta el nodo <strong>K</strong>, incluyendo los nodos 1 y <strong>K</strong>, esto puede lograrse mediante recursividad.</p>
<p>La tabla <strong>ancestro[K][M]</strong> nos permitirá saber si el nodo <strong>M</strong> es un ancestro del nodo <strong>K</strong>, dándonos cuenta que todos los ancestros de <strong>K</strong> se encuentran en la lista <strong>L</strong> cuando la búsqueda en profundidad llega al nodo <strong>K</strong>, podemos llenar la tabla <strong>ancestro[K][M]</strong> durante la búsqueda en profundidad. Con la tabla anterior es fácil responder las preguntas, pues la respuesta depende de <strong>ancestro[B][A]</strong>.</p>
<p><em>Complejidad de la solución: <strong>O(N2+Q)</strong></em></p>
<p><em><strong>Subtarea 3</strong></em>. Para obtener los puntos de esta subtarea podemos utilizar cualquier algoritmo para resolver el clásico problema del ancestro común de dos nodos en un árbol, puesto que la respuesta es 1 si el ancestro común entre los nodos <strong>A</strong> y <strong>B</strong> es el nodo <strong>A</strong>. Este problema ya ha sido estudiado ampliamente y tiene diversas formas de ser resuelto con complejidad <strong>O(NlogN)</strong>, en el foro de tutoriales de TopCoder podemos encontrar un buen artículo con algunos de los algoritmos que pueden ser utilizados:</p>
<p><a href="http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=lowestCommonAncestor">TopCoder Lowest Common Ancestor</a></p>
<p>El algoritmo que utiliza programación dinámica es el más recomendado, puesto que se puede responder a las <strong>Q</strong> preguntas en un tiempo constante.</p>
<p><em>Complejidad de la solución: <strong>O(NlogN+Q)</strong></em></p>
<p><em><strong>Subtarea 4</strong></em>. Para empezar, notemos que la solución anterior no funciona para este conjunto de puntos porque utiliza demasiada memoria, el simple hecho de almacenar los nodos y las aristas ocupa bastante espacio en memoria (aproximadamente 100Mb) y una solución para la subtarea 3 requeriría al menos 50Mb más, por lo tanto no es posible completar la subtarea 4 con una solución como la anterior, para obtener los 100 puntos en este problema necesitamos una idea mucho más creativa.</p>
<p>Renombremos todos los nodos del árbol enumerandolos del 1 al <strong>N</strong> siguiendo el orden establecido por el recorrido en postorden del árbol comenzando por el nodo 1, después, para cada nodo, con su respectivo número <strong>Y</strong>, hay que obtener el menor número presente en el subárbol con raíz en el nodo <strong>Y</strong>, denotemos este número menor como <strong>X</strong>, con los números <strong>X</strong> y <strong>Y</strong> definimos entonces un intervalo cerrado <strong>[X,Y]</strong> que nos representa que en el subárbol con raíz en el nodo <strong>Y</strong> se contienen todos los nodos cuyo número se encuentra en el intervalo <strong>[X,Y]</strong>. Podemos interpretar esta información de una manera más conveniente, un nodo con número <strong>Y</strong> es ancestro de un nodo con número <strong>K</strong> si <strong>X ≤ K ≤ Y</strong>, lo cual nos permitirá responder las preguntas planteadas.</p>
<p>Es recomendable que el olímpico experimente y se convenza que la propiedad del intervalo <strong>[X,Y]</strong> es siempre correcta debido a que el recorrido en postorden establecerá que el nodo con el número <strong>X</strong>, que establece la cota inferior del intervalo, siempre será una hoja del subárbol y el nodo con valor <strong>Y</strong>, que establece la cota superior del intervalo, siempre será la raíz del subárbol, cualquier otro valor fuera del intervalo estará excluido del subárbol con raíz en el nodo <strong>Y</strong>.</p>
<p><em>Complejidad de la solución: <strong>O(N+Q)</strong></em></p>
<ul class=pa0>
<li class=list>
<a href=/tags/etapa-1 class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Etapa 1</a>
</li>
<li class=list>
<a href=/tags/ethan-jim%C3%A9nez class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Ethan Jiménez</a>
</li>
<li class=list>
<a href=/tags/examen-4 class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Examen 4</a>
</li>
<li class=list>
<a href=/tags/preselectivo class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">preselectivo</a>
</li>
<li class=list>
<a href=/tags/soluci%C3%B3n class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">solución</a>
</li>
<li class=list>
<a href=/tags/soluciones-preselectivo-2013 class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Soluciones Preselectivo 2013</a>
</li>
</ul>
<div class="mt6 instapaper_ignoref">
</div>
</div>
<aside class="w-30-l mt6-l">
<div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
<p class="f5 b mb3">Related</p>
<ul class="pa0 list">
<li class=mb2>
<a href=/solucion-a-chilly-rapero/>Solución a "Chilly Rapero"</a>
</li>
<li class=mb2>
<a href=/solucion-a-cambio/>Solución a "Cambio"</a>
</li>
<li class=mb2>
<a href=/solucion-a-minecraft/>Solución a "Minecraft"</a>
</li>
<li class=mb2>
<a href=/solucion-a-metro/>Solución a "Metro"</a>
</li>
<li class=mb2>
<a href=/162/>Solución a "Pulseras"</a>
</li>
<li class=mb2>
<a href=/solucion-a-los-bloques-de-link/>Solución a "Los Bloques de Link"</a>
</li>
<li class=mb2>
<a href=/solucion-a-problema/>Solución a "Problema"</a>
</li>
<li class=mb2>
<a href=/solucion-a-alfiles/>Solución a "Alfiles"</a>
</li>
<li class=mb2>
<a href=/solucion-a-el-collar-de-perlas/>Solución a "El collar de perlas"</a>
</li>
<li class=mb2>
<a href=/solucion-a-mario-reloaded/>Solución a "Mario Reloaded"</a>
</li>
<li class=mb2>
<a href=/juego-lento-ethan-jimenez/>Solución a "Juego Lento"</a>
</li>
<li class=mb2>
<a href=/solucion-a-k-arbol/>Solución a "K-Arbol"</a>
</li>
<li class=mb2>
<a href=/solucion-a-teclado-roto/>Solución a "Teclado Roto"</a>
</li>
<li class=mb2>
<a href=/solucion-a-el-artista-lento/>Solución a "El Artista Lento"</a>
</li>
<li class=mb2>
<a href=/engranes-khayyam-solucion-enrique-lira/>Solución a "Engranes"</a>
</li>
</ul>
</div>
</aside>
</article>
</main>
<footer class="bg-black bottom-0 w-100 pa3" role=contentinfo>
<div class="flex justify-between">
<a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://blog.omegaup.com/>
&copy; omegaUp blog 2022
</a>
<div>
<div class=ananke-socials>
</div></div>
</div>
</footer>
<script type=text/javascript async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type=text/x-mathjax-config>
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['$latex', '$'], ['\\(','\\)']],
      displayMath: [['$$','$$'], ['\[','\]']],
      processEscapes: true,
      processEnvironments: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      ignoreClass: 'gist',
      TeX: {
        equationNumbers: { autoNumber: "AMS" },
        extensions: ["AMSmath.js", "AMSsymbols.js"],
      },
   },
 });
</script>
</body>
</html>