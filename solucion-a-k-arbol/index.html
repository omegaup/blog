<!doctype html><html lang=es-mx>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge,chrome=1">
<title>Solución a "K-Arbol" | omegaUp blog</title>
<meta name=viewport content="width=device-width,minimum-scale=1">
<meta name=description content="Concurso: Preselectivo para la IOI 2013, Etapa 1, Examen 5 **Autor: **Saul de Nova Caballero
En pocas palabras el problema es, dado un árbol que se puede colorear, encuentra la menor solución satisfaciendo las restricciones dadas sobre los colores. Este problema es un caso particular de Graph Coloring(en español coloración de grafos), en donde el grafo es un árbol.
Subcaso 1(10 puntos) Para el primer subcaso era posible hacer una búsqueda en profunidad sobre todos los nodos, encontrando la menor solución.">
<meta name=generator content="Hugo 0.92.0">
<meta name=ROBOTS content="NOINDEX, NOFOLLOW">
<link rel=stylesheet href=/ananke/css/main.min.css>
<link rel=stylesheet href="https://fonts.googleapis.com/css?family=Libre+Franklin%3A300%2C300i%2C400%2C400i%2C600%2C600i%2C800%2C800i&amp;#038;subset=latin%2Clatin-ext">
<link rel=stylesheet href=/css/styles.css>
<meta property="og:title" content="Solución a &#34;K-Arbol&#34;">
<meta property="og:description" content="Concurso: Preselectivo para la IOI 2013, Etapa 1, Examen 5 **Autor: **Saul de Nova Caballero
En pocas palabras el problema es, dado un árbol que se puede colorear, encuentra la menor solución satisfaciendo las restricciones dadas sobre los colores. Este problema es un caso particular de Graph Coloring(en español coloración de grafos), en donde el grafo es un árbol.
Subcaso 1(10 puntos) Para el primer subcaso era posible hacer una búsqueda en profunidad sobre todos los nodos, encontrando la menor solución.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://blogv2.omegaup.com/solucion-a-k-arbol/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2013-01-07T17:37:40+00:00">
<meta property="article:modified_time" content="2013-01-07T17:37:40+00:00">
<meta itemprop=name content="Solución a &#34;K-Arbol&#34;">
<meta itemprop=description content="Concurso: Preselectivo para la IOI 2013, Etapa 1, Examen 5 **Autor: **Saul de Nova Caballero
En pocas palabras el problema es, dado un árbol que se puede colorear, encuentra la menor solución satisfaciendo las restricciones dadas sobre los colores. Este problema es un caso particular de Graph Coloring(en español coloración de grafos), en donde el grafo es un árbol.
Subcaso 1(10 puntos) Para el primer subcaso era posible hacer una búsqueda en profunidad sobre todos los nodos, encontrando la menor solución."><meta itemprop=datePublished content="2013-01-07T17:37:40+00:00">
<meta itemprop=dateModified content="2013-01-07T17:37:40+00:00">
<meta itemprop=wordCount content="1528">
<meta itemprop=keywords content="Etapa 1,Examen 5,Soluciones Preselectivo 2013,"><meta name=twitter:card content="summary">
<meta name=twitter:title content="Solución a &#34;K-Arbol&#34;">
<meta name=twitter:description content="Concurso: Preselectivo para la IOI 2013, Etapa 1, Examen 5 **Autor: **Saul de Nova Caballero
En pocas palabras el problema es, dado un árbol que se puede colorear, encuentra la menor solución satisfaciendo las restricciones dadas sobre los colores. Este problema es un caso particular de Graph Coloring(en español coloración de grafos), en donde el grafo es un árbol.
Subcaso 1(10 puntos) Para el primer subcaso era posible hacer una búsqueda en profunidad sobre todos los nodos, encontrando la menor solución.">
</head>
<body class="ma0 bg-near-white">
<header class=bg-top style=background-image:url(https://blogv2.omegaup.com/images/cover.jpeg)>
<div class="pv3 bg-black-60">
<nav class="pv4 ph3 ph4-ns" role=navigation>
<div class="mw8 center">
<h1>
<a href=/ class="hover-white no-underline white-90 dib">
omegaUp blog
</a>
</h1>
<h2>Incrementando el talento de Ingeniería de Software en América Latina</h2>
<div class="flex-l justify-between items-center center">
<div class="flex-l items-center">
<div class=ananke-socials>
</div>
</div>
</div>
</div>
</nav>
</div>
</header>
<header class="bg-black-90 sticky w-100 ph3 pv3 pv4-ns ph4-m ph5-l">
<nav class="f6 fw6 ttu tracked">
<a class="link dim white dib mr3" href=/ title=Inicio>Inicio</a>
<a class="link dim white dib mr3" href=/search/ title=Búsqueda>Búsqueda</a>
<a class="link dim white dib" href=https://omegaup.org/ title="Acerca de">Acerca de</a>
</nav>
</header>
<main class=pb7 role=main>
<article class="flex-l flex-wrap justify-between mw8 center ph3">
<header class="mt4 w-100">
<aside class="instapaper_ignoref b helvetica tracked">
POSTS
</aside>
<div id=sharing class="mt3 ananke-socials">
</div>
<p class="tracked p0 mb0">
<time class="f6 dib tracked" datetime=2013-01-07T17:37:40Z>January 7, 2013</time>
Por <strong>
Lira
</strong>
</p>
<h1 class="f2 pv2 mv1">Solución a "K-Arbol"</h1>
</header>
<div class="nested-copy-line-height lh-copy sans-serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l">
<p><strong>Concurso:</strong> <a href=https://omegaup.com/arena/IOI2013E1P5>Preselectivo para la IOI 2013, Etapa 1, Examen 5</a> **Autor: **<a href=mailto:lkt345@gmail.com>Saul de Nova Caballero</a></p>
<p>En pocas palabras el problema es, dado un árbol que se puede colorear, encuentra la menor solución satisfaciendo las restricciones dadas sobre los colores. Este problema es un caso particular de Graph Coloring(en español coloración de grafos), en donde el grafo es un árbol.</p>
<h1 id=subcaso-110-puntos>Subcaso 1(10 puntos)</h1>
<p>Para el primer subcaso era posible hacer una búsqueda en profunidad sobre todos los nodos, encontrando la menor solución. Para guardar el árbol, era posible utilizar una matriz que guardara todos los colores posibles y entonces ver si era posible una solución con el menor color posible. La solución de este caso era trivial si se usaba una búsqueda exhaustiva.</p>
<h1 id=subcaso-220-puntos>Subcaso 2(20 puntos)</h1>
<p>Para el segundo subcaso era necesario una mejor estrategia. Para este caso, era necesaria la observación de que todos los colores de los nodos solo dependen de su padre y de sus hijos. Otra observación importante era que para los nodos del árbol, excepto las hojas, había que procesar a sus hijos menores.Procesar implica checar que colores puede tener un nodo. Por lo que para lograr los puntos en este subcaso era necesario procesar los nodos hijos, luego sus padres y asi sucesivamente. Es decir para procesar, un nodo primero hay que procesar a todos sus hijos.</p>
<p>La forma de procesar a un nodo es la siguiente. Por cada nodo se compara con su padre y al momento de comparar, lo que se busca es que por cada color del nodo, el padre no tenga un color que lo elimine como opción. Es decir tengo el siguiente caso</p>
<p>Nodo -> Rojo, Verde, Azul</p>
<p>Padre -> Rojo, Verde</p>
<p>Por cada color del nodo, el padre puede elegir un color distinto. Por ejemplo, si el Nodo es Rojo, el padre puede ser Verde. Si el nodo es Verde, el padre puede ser Rojo y si el nodo es Azul, puedes elegir el Rojo o el Verde. Sin embargo, para el siguiente caso</p>
<p>Nodo -> Rojo, Verde, Azul</p>
<p>Padre -> Rojo</p>
<p>El padre del nodo solo puede ser Rojo, por lo que para que las condiciones del problema se cumplan, el Nodo no puede ser Rojo. En este caso actualizamos la tabla de valores posibles del Nodo. Y queda como</p>
<p>Nodo -> Verde, Azul</p>
<p>Padre -> Rojo</p>
<p>Lo anterior se hace para cada par de nodos desde los nodos hoja hasta la raíz. Procesandolos de menor a mayor da la mejor solución</p>
<h1 id=subcaso-320-puntos>Subcaso 3(20 puntos)</h1>
<p>Para obtener los puntos del subcaso 3 era posible simplemente ver por cada nodo procesarlo comenzando en la raíz, ya que en este caso el grafo en basicamente una gran línea. Utilizando la técnica descrita en el subcaso 2 por cada nodo se obtenía una solución a este subcaso</p>
<h1 id=subcaso-450-puntos>Subcaso 4(50 puntos)</h1>
<p>Para los puntos del cuarto caso era necesario &ldquo;linearizar&rdquo; el grafo, esto simplemente significa que los nodos mas arriba van a tener menor prioridad que los nodos de abajo, es decir el nodo raíz tendría valor 0 mientras que sus hijos tendrían valores más altos. Por ejemplo para un caso asi:</p>
<p>0 -> 1 -> 4</p>
<p>-> 2</p>
<p>-> 3</p>
<p>El nodo 0 es la raíz del árbol, el nodo 1 y 3 son hijos de 0 y los nodos 2 y 4 son hijos de 1, el arbol se linearizaría de la siguiente manera:</p>
<p>0 -> 1, 1 -> 2, 3 -> 3, 4 -> 4, 2 -> 5</p>
<p>Ahora lo que es necesario hacer es por cada nodo de mayor prioridad a los de menor prioridad es necesario hacer la técnica explicada en el subcaso 2.Tomando en cuenta otra observación. Que solo es necesario procesar los nodos que solo tengan un color. Es decir si el nodo 0 tiene posibilidad de ser Rojo, Azul o Verde, no es necesario procesarlo. Sin embargo si un nodo solo puede ser azul, hay que eliminar esa posiblidad tanto de su padre como de sus hijos.</p>
<p><img src=/images/linearizar.jpg alt></p>
<p>Imagen obtenida de <a href=http://aima.cs.berkeley.edu/newchap05.pdf>http://aima.cs.berkeley.edu/newchap05.pdf</a></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp> <span style=color:#ae81ff>1</span> <span style=color:#75715e>// karbol100.cpp
</span><span style=color:#75715e></span> <span style=color:#ae81ff>2</span> <span style=color:#75715e>// By Saul de Nova Caballero
</span><span style=color:#75715e></span> <span style=color:#ae81ff>3</span> 
 <span style=color:#ae81ff>4</span> <span style=color:#75715e>//Librerias de la standard template library de c++(stl)
</span><span style=color:#75715e></span> <span style=color:#ae81ff>5</span> <span style=color:#960050;background-color:#1e0010>#</span>include <span style=color:#f92672>&lt;</span>algorithm<span style=color:#f92672>&gt;</span>
 <span style=color:#ae81ff>6</span> <span style=color:#960050;background-color:#1e0010>#</span>include <span style=color:#f92672>&lt;</span>cassert<span style=color:#f92672>&gt;</span>
 <span style=color:#ae81ff>7</span> <span style=color:#960050;background-color:#1e0010>#</span>include <span style=color:#f92672>&lt;</span>cstdio<span style=color:#f92672>&gt;</span>
 <span style=color:#ae81ff>8</span> <span style=color:#960050;background-color:#1e0010>#</span>include <span style=color:#f92672>&lt;</span>cstdlib<span style=color:#f92672>&gt;</span>
 <span style=color:#ae81ff>9</span> <span style=color:#960050;background-color:#1e0010>#</span>include <span style=color:#f92672>&lt;</span>cstring<span style=color:#f92672>&gt;</span>
 <span style=color:#ae81ff>10</span> <span style=color:#960050;background-color:#1e0010>#</span>include <span style=color:#f92672>&lt;</span>iostream<span style=color:#f92672>&gt;</span>
 <span style=color:#ae81ff>11</span> <span style=color:#960050;background-color:#1e0010>#</span>include <span style=color:#f92672>&lt;</span>list<span style=color:#f92672>&gt;</span>
 <span style=color:#ae81ff>12</span> <span style=color:#960050;background-color:#1e0010>#</span>include <span style=color:#f92672>&lt;</span>utility<span style=color:#f92672>&gt;</span>
 <span style=color:#ae81ff>13</span> 
 <span style=color:#ae81ff>14</span> <span style=color:#66d9ef>using</span> <span style=color:#66d9ef>namespace</span> std;
 <span style=color:#ae81ff>15</span> 
 <span style=color:#ae81ff>16</span> <span style=color:#75715e>//Iterador sobre estructuras de datos. En este caso listas de la stl
</span><span style=color:#75715e></span> <span style=color:#ae81ff>17</span> <span style=color:#960050;background-color:#1e0010>#</span>define TR(container, it) <span style=color:#960050;background-color:#1e0010>\</span>\
 <span style=color:#ae81ff>18</span> <span style=color:#66d9ef>for</span>(typeof(container.begin()) it <span style=color:#f92672>=</span> container.begin() ; it <span style=color:#f92672>!=</span> container.end() ; <span style=color:#f92672>++</span>it)
 <span style=color:#ae81ff>19</span> 
 <span style=color:#ae81ff>20</span> <span style=color:#75715e>//Definicion de un par de la stl
</span><span style=color:#75715e></span> <span style=color:#ae81ff>21</span> <span style=color:#66d9ef>typedef</span> pair<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span>, <span style=color:#66d9ef>int</span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#f92672>&gt;</span> pii;
 <span style=color:#ae81ff>22</span> 
 <span style=color:#ae81ff>23</span> <span style=color:#75715e>//Constantes del programa
</span><span style=color:#75715e></span> <span style=color:#ae81ff>24</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> MAXN <span style=color:#f92672>=</span> <span style=color:#ae81ff>10002</span>;
 <span style=color:#ae81ff>25</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> MAXM <span style=color:#f92672>=</span> <span style=color:#ae81ff>502</span>;
 <span style=color:#ae81ff>26</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> MAXMEM <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#f92672>*</span>MAXN;
 <span style=color:#ae81ff>27</span> 
 <span style=color:#ae81ff>28</span> <span style=color:#75715e>//Clase para definir los hijos del arbol
</span><span style=color:#75715e></span> <span style=color:#ae81ff>29</span> <span style=color:#75715e>//Es una lista con todos los hijos de cada nodo
</span><span style=color:#75715e></span> <span style=color:#ae81ff>30</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Graph</span> {
 <span style=color:#ae81ff>31</span>    <span style=color:#66d9ef>public</span> <span style=color:#f92672>:</span>
 <span style=color:#ae81ff>32</span>    <span style=color:#66d9ef>void</span> addNode(<span style=color:#66d9ef>int</span> node, <span style=color:#66d9ef>int</span> value) {
 <span style=color:#ae81ff>33</span>        nodes<span style=color:#960050;background-color:#1e0010>\</span>[node<span style=color:#960050;background-color:#1e0010>\</span>].push<span style=color:#960050;background-color:#1e0010>\</span>_back(value);
 <span style=color:#ae81ff>34</span>    }
 <span style=color:#ae81ff>35</span>    list<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#f92672>&gt;</span> nodes<span style=color:#960050;background-color:#1e0010>\</span>[MAXN<span style=color:#960050;background-color:#1e0010>\</span>];
 <span style=color:#ae81ff>36</span> };
 <span style=color:#ae81ff>37</span> 
 <span style=color:#ae81ff>38</span> <span style=color:#75715e>//Clase para cola de las busquedas en amplitud
</span><span style=color:#75715e></span> <span style=color:#ae81ff>39</span> <span style=color:#75715e>//Es de tipo generica
</span><span style=color:#75715e></span> <span style=color:#ae81ff>40</span> <span style=color:#66d9ef>template</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>T</span><span style=color:#f92672>&gt;</span>
 <span style=color:#ae81ff>41</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Queue</span> {
 <span style=color:#ae81ff>42</span>    <span style=color:#66d9ef>public</span> <span style=color:#f92672>:</span>
 <span style=color:#ae81ff>43</span>    Queue() { init(); }
 <span style=color:#ae81ff>44</span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>init</span>() { p1 <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; p2 <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; }
 <span style=color:#ae81ff>45</span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>push</span>(T val) { memory<span style=color:#960050;background-color:#1e0010>\</span>[<span style=color:#f92672>++</span>p1<span style=color:#960050;background-color:#1e0010>\</span>] <span style=color:#f92672>=</span> val; }
 <span style=color:#ae81ff>46</span>    T <span style=color:#a6e22e>front</span>() { <span style=color:#66d9ef>return</span> memory<span style=color:#960050;background-color:#1e0010>\</span>[p2<span style=color:#960050;background-color:#1e0010>\</span>]; }
 <span style=color:#ae81ff>47</span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>pop</span>() { p2<span style=color:#f92672>++</span>; }
 <span style=color:#ae81ff>48</span>    <span style=color:#66d9ef>bool</span> <span style=color:#a6e22e>empty</span>() { <span style=color:#66d9ef>return</span> (p1 <span style=color:#f92672>&lt;</span> p2); }
 <span style=color:#ae81ff>49</span> 
 <span style=color:#ae81ff>50</span>    <span style=color:#66d9ef>private</span> <span style=color:#f92672>:</span>
 <span style=color:#ae81ff>51</span>    <span style=color:#66d9ef>int</span> p1, p2;
 <span style=color:#ae81ff>52</span>    T memory<span style=color:#960050;background-color:#1e0010>\</span>[MAXMEM<span style=color:#960050;background-color:#1e0010>\</span>];
 <span style=color:#ae81ff>53</span> };
 <span style=color:#ae81ff>54</span> 
 <span style=color:#ae81ff>55</span> <span style=color:#75715e>//Definicion de todas las variables del programa
</span><span style=color:#75715e></span> <span style=color:#ae81ff>56</span> <span style=color:#66d9ef>int</span> N, M, C, <span style=color:#75715e>//Variables dadas
</span><span style=color:#75715e></span> <span style=color:#ae81ff>57</span>    allowedColorsSize<span style=color:#960050;background-color:#1e0010>\</span>[MAXN<span style=color:#960050;background-color:#1e0010>\</span>], <span style=color:#75715e>//La cantidad de colores posibles por nodo
</span><span style=color:#75715e></span> <span style=color:#ae81ff>58</span>    parents<span style=color:#960050;background-color:#1e0010>\</span>[MAXN<span style=color:#960050;background-color:#1e0010>\</span>], <span style=color:#75715e>//El padre de cada nodo
</span><span style=color:#75715e></span> <span style=color:#ae81ff>59</span>    colorAssigned<span style=color:#960050;background-color:#1e0010>\</span>[MAXN<span style=color:#960050;background-color:#1e0010>\</span>]; <span style=color:#75715e>//El color que le asigne al final al nodo
</span><span style=color:#75715e></span> <span style=color:#ae81ff>60</span> <span style=color:#66d9ef>bool</span> allowedColors<span style=color:#960050;background-color:#1e0010>\</span>[MAXN<span style=color:#960050;background-color:#1e0010>\</span>]<span style=color:#960050;background-color:#1e0010>\</span>[MAXM<span style=color:#960050;background-color:#1e0010>\</span>]; <span style=color:#75715e>//Una matriz con todos los colores posibles por cada nodo
</span><span style=color:#75715e></span> <span style=color:#ae81ff>61</span> list<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#f92672>&gt;</span> nodesOrder; <span style=color:#75715e>//Una lista ordenada de mayor a menor por la profundidad de cada nodo
</span><span style=color:#75715e></span> <span style=color:#ae81ff>62</span> Graph tree; <span style=color:#75715e>//Mi arbol
</span><span style=color:#75715e></span> <span style=color:#ae81ff>63</span> Queue<span style=color:#f92672>&lt;</span>pii<span style=color:#f92672>&gt;</span> searchDepth; <span style=color:#75715e>//Una cola para la busqueda
</span><span style=color:#75715e></span> <span style=color:#ae81ff>64</span> 
 <span style=color:#ae81ff>65</span> <span style=color:#75715e>//Regresa el color valido por cada nodo permitiendo que un nodo no sea de un color
</span><span style=color:#75715e></span> <span style=color:#ae81ff>66</span> <span style=color:#66d9ef>int</span> validColor(<span style=color:#66d9ef>int</span> node, <span style=color:#66d9ef>int</span> constraint <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>) {
 <span style=color:#ae81ff>67</span>    <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> M; <span style=color:#f92672>++</span>i) {
 <span style=color:#ae81ff>68</span>        <span style=color:#a6e22e>if</span>(allowedColors<span style=color:#960050;background-color:#1e0010>\</span>[node<span style=color:#960050;background-color:#1e0010>\</span>]<span style=color:#960050;background-color:#1e0010>\</span>[i<span style=color:#960050;background-color:#1e0010>\</span>] <span style=color:#f92672>&amp;&amp;</span> constraint <span style=color:#f92672>!=</span> i) {
 <span style=color:#ae81ff>69</span>            <span style=color:#66d9ef>return</span> i;
 <span style=color:#ae81ff>70</span>        }
 <span style=color:#ae81ff>71</span>    }
 <span style=color:#ae81ff>72</span>    <span style=color:#66d9ef>return</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>;
 <span style=color:#ae81ff>73</span> }
 <span style=color:#ae81ff>74</span> 
 <span style=color:#ae81ff>75</span> <span style=color:#75715e>//Funcion para la lectura de todas las variables y la inicializacion de las estructuras
</span><span style=color:#75715e></span> <span style=color:#ae81ff>76</span> <span style=color:#75715e>//Los asserts son para probar que el codigo es correcto
</span><span style=color:#75715e></span> <span style=color:#ae81ff>77</span> <span style=color:#f92672>/</span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#f92672>*</span>Guarda en allowedColors los posibles colores por nodo en una matriz<span style=color:#960050;background-color:#1e0010>\*/</span>
 <span style=color:#ae81ff>78</span> <span style=color:#66d9ef>void</span> read() {
 <span style=color:#ae81ff>79</span>    <span style=color:#66d9ef>int</span> node, prohibited;
 <span style=color:#ae81ff>80</span>    <span style=color:#a6e22e>scanf</span>(<span style=color:#e6db74>&#34;%d%d&#34;</span>, <span style=color:#f92672>&amp;</span>N, <span style=color:#f92672>&amp;</span>M);
 <span style=color:#ae81ff>81</span>    <span style=color:#a6e22e>assert</span>(<span style=color:#ae81ff>1</span> <span style=color:#f92672>&lt;=</span> N <span style=color:#f92672>&amp;&amp;</span> N <span style=color:#f92672>&lt;=</span> MAXN<span style=color:#f92672>-</span><span style=color:#ae81ff>2</span>);
 <span style=color:#ae81ff>82</span>    allowedColorsSize<span style=color:#960050;background-color:#1e0010>\</span>[<span style=color:#ae81ff>0</span><span style=color:#960050;background-color:#1e0010>\</span>] <span style=color:#f92672>=</span> M;
 <span style=color:#ae81ff>83</span>    <span style=color:#a6e22e>memset</span>(allowedColors, true, <span style=color:#66d9ef>sizeof</span>(allowedColors));
 <span style=color:#ae81ff>84</span>    <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>int</span> k <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; k <span style=color:#f92672>&lt;</span> N; <span style=color:#f92672>++</span>k) {
 <span style=color:#ae81ff>85</span>        <span style=color:#a6e22e>scanf</span>(<span style=color:#e6db74>&#34;%d&#34;</span>, <span style=color:#f92672>&amp;</span>node);
 <span style=color:#ae81ff>86</span>        <span style=color:#a6e22e>assert</span>(<span style=color:#ae81ff>0</span> <span style=color:#f92672>&lt;=</span> node <span style=color:#f92672>&amp;&amp;</span> node <span style=color:#f92672>&lt;</span> N);
 <span style=color:#ae81ff>87</span>        parents<span style=color:#960050;background-color:#1e0010>\</span>[k<span style=color:#960050;background-color:#1e0010>\</span>] <span style=color:#f92672>=</span> node;
 <span style=color:#ae81ff>88</span>        tree.addNode(node, k);
 <span style=color:#ae81ff>89</span>        allowedColorsSize<span style=color:#960050;background-color:#1e0010>\</span>[k<span style=color:#960050;background-color:#1e0010>\</span>] <span style=color:#f92672>=</span> M;
 <span style=color:#ae81ff>90</span>    }
 <span style=color:#ae81ff>91</span>    <span style=color:#a6e22e>scanf</span>(<span style=color:#e6db74>&#34;%d&#34;</span>, <span style=color:#f92672>&amp;</span>C);
 <span style=color:#ae81ff>92</span>    <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>int</span> k <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; k <span style=color:#f92672>&lt;</span> C; <span style=color:#f92672>++</span>k) {
 <span style=color:#ae81ff>93</span>        <span style=color:#a6e22e>scanf</span>(<span style=color:#e6db74>&#34;%d%d&#34;</span>, <span style=color:#f92672>&amp;</span>node, <span style=color:#f92672>&amp;</span>prohibited);
 <span style=color:#ae81ff>94</span>        <span style=color:#a6e22e>assert</span>(<span style=color:#ae81ff>0</span> <span style=color:#f92672>&lt;=</span> node <span style=color:#f92672>&amp;&amp;</span> node <span style=color:#f92672>&lt;</span> N <span style=color:#f92672>&amp;&amp;</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&lt;=</span> prohibited <span style=color:#f92672>&amp;&amp;</span> prohibited <span style=color:#f92672>&lt;</span> M);
 <span style=color:#ae81ff>95</span>        <span style=color:#a6e22e>if</span>(allowedColors<span style=color:#960050;background-color:#1e0010>\</span>[node<span style=color:#960050;background-color:#1e0010>\</span>]<span style=color:#960050;background-color:#1e0010>\</span>[prohibited<span style=color:#960050;background-color:#1e0010>\</span>]) { <span style=color:#75715e>//Checa que los nodos no se repitan ya que se pueden repetir
</span><span style=color:#75715e></span> <span style=color:#ae81ff>96</span>            allowedColors<span style=color:#960050;background-color:#1e0010>\</span>[node<span style=color:#960050;background-color:#1e0010>\</span>]<span style=color:#960050;background-color:#1e0010>\</span>[prohibited<span style=color:#960050;background-color:#1e0010>\</span>] <span style=color:#f92672>=</span> false;
 <span style=color:#ae81ff>97</span>            allowedColorsSize<span style=color:#960050;background-color:#1e0010>\</span>[node<span style=color:#960050;background-color:#1e0010>\</span>] <span style=color:#f92672>--</span>;
 <span style=color:#ae81ff>98</span>        }
 <span style=color:#ae81ff>99</span>    }
<span style=color:#ae81ff>100</span> }
<span style=color:#ae81ff>101</span> 
<span style=color:#ae81ff>102</span> <span style=color:#f92672>/</span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#f92672>*</span>Una busqueda en amplitud para <span style=color:#e6db74>&#34;linearizar el árbol&#34;</span><span style=color:#960050;background-color:#1e0010>\*/</span>
<span style=color:#ae81ff>103</span> <span style=color:#66d9ef>void</span> orderNodes() {
<span style=color:#ae81ff>104</span>     searchDepth.push(make<span style=color:#960050;background-color:#1e0010>\</span>_pair(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>));
<span style=color:#ae81ff>105</span>     <span style=color:#a6e22e>while</span>(<span style=color:#f92672>!</span>searchDepth.empty()) {
<span style=color:#ae81ff>106</span>         pii value <span style=color:#f92672>=</span> searchDepth.front(); searchDepth.pop();
<span style=color:#ae81ff>107</span>         nodesOrder.push<span style=color:#960050;background-color:#1e0010>\</span>_front(value.first);
<span style=color:#ae81ff>108</span>         TR(tree.nodes<span style=color:#960050;background-color:#1e0010>\</span>[value.first<span style=color:#960050;background-color:#1e0010>\</span>], it) {
<span style=color:#ae81ff>109</span>             searchDepth.push(make<span style=color:#960050;background-color:#1e0010>\</span>_pair(<span style=color:#960050;background-color:#1e0010>\</span><span style=color:#f92672>*</span>it, value.second <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>));
<span style=color:#ae81ff>110</span>         }
<span style=color:#ae81ff>111</span>     }
<span style=color:#ae81ff>112</span> }
<span style=color:#ae81ff>113</span> 
<span style=color:#ae81ff>114</span> <span style=color:#f92672>/</span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#f92672>*</span>Checa por cada nodo de mayor a menor en la linearizacion, los colores posibles por nodo que solo tiene un color posible<span style=color:#960050;background-color:#1e0010>\*/</span>
<span style=color:#ae81ff>115</span> <span style=color:#66d9ef>void</span> enforceArc() {
<span style=color:#ae81ff>116</span>     <span style=color:#a6e22e>TR</span>(nodesOrder, it) {
<span style=color:#ae81ff>117</span>         <span style=color:#66d9ef>int</span> currNode <span style=color:#f92672>=</span> <span style=color:#960050;background-color:#1e0010>\</span><span style=color:#f92672>*</span>it;
<span style=color:#ae81ff>118</span>         <span style=color:#66d9ef>int</span> parent <span style=color:#f92672>=</span> parents<span style=color:#960050;background-color:#1e0010>\</span>[<span style=color:#960050;background-color:#1e0010>\</span><span style=color:#f92672>*</span>it<span style=color:#960050;background-color:#1e0010>\</span>];
<span style=color:#ae81ff>119</span>         <span style=color:#66d9ef>if</span>(currNode <span style=color:#f92672>!=</span> <span style=color:#ae81ff>0</span>) {
<span style=color:#ae81ff>120</span>             <span style=color:#66d9ef>if</span>(allowedColorsSize<span style=color:#960050;background-color:#1e0010>\</span>[currNode<span style=color:#960050;background-color:#1e0010>\</span>] <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>||</span> allowedColorsSize<span style=color:#960050;background-color:#1e0010>\</span>[parent<span style=color:#960050;background-color:#1e0010>\</span>] <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) {
<span style=color:#ae81ff>121</span>                 <span style=color:#66d9ef>if</span>(allowedColorsSize<span style=color:#960050;background-color:#1e0010>\</span>[parent<span style=color:#960050;background-color:#1e0010>\</span>] <span style=color:#f92672>==</span> <span style=color:#ae81ff>1</span>) {
<span style=color:#ae81ff>122</span>                     swap(currNode, parent);
<span style=color:#ae81ff>123</span>                 }
<span style=color:#ae81ff>124</span>                 <span style=color:#66d9ef>int</span> color <span style=color:#f92672>=</span> validColor(currNode);
<span style=color:#ae81ff>125</span>                 <span style=color:#75715e>//printf(&#34;%d %d %d\\n&#34;, currNode, parent, color);
</span><span style=color:#75715e></span><span style=color:#ae81ff>126</span>                 <span style=color:#66d9ef>if</span>(allowedColors<span style=color:#960050;background-color:#1e0010>\</span>[parent<span style=color:#960050;background-color:#1e0010>\</span>]<span style=color:#960050;background-color:#1e0010>\</span>[color<span style=color:#960050;background-color:#1e0010>\</span>]) {
<span style=color:#ae81ff>127</span>                     allowedColors<span style=color:#960050;background-color:#1e0010>\</span>[parent<span style=color:#960050;background-color:#1e0010>\</span>]<span style=color:#960050;background-color:#1e0010>\</span>[color<span style=color:#960050;background-color:#1e0010>\</span>] <span style=color:#f92672>=</span> false;
<span style=color:#ae81ff>128</span>                     allowedColorsSize<span style=color:#960050;background-color:#1e0010>\</span>[parent<span style=color:#960050;background-color:#1e0010>\</span>] <span style=color:#f92672>--</span>;
<span style=color:#ae81ff>129</span>                 }
<span style=color:#ae81ff>130</span>             }
<span style=color:#ae81ff>131</span>         }
<span style=color:#ae81ff>132</span>         <span style=color:#75715e>//Si no hay colores posibles, no se puede resolver el mapa
</span><span style=color:#75715e></span><span style=color:#ae81ff>133</span>         <span style=color:#66d9ef>if</span>(allowedColorsSize<span style=color:#960050;background-color:#1e0010>\</span>[currNode<span style=color:#960050;background-color:#1e0010>\</span>] <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>) {
<span style=color:#ae81ff>134</span>             printf(<span style=color:#e6db74>&#34;-1</span><span style=color:#ae81ff>\\</span><span style=color:#e6db74>n&#34;</span>);
<span style=color:#ae81ff>135</span>             exit(<span style=color:#ae81ff>0</span>);
<span style=color:#ae81ff>136</span>         }
<span style=color:#ae81ff>137</span>     }
<span style=color:#ae81ff>138</span>     <span style=color:#75715e>//Checa de nuevo si alguno de los colores no puede ser
</span><span style=color:#75715e></span><span style=color:#ae81ff>139</span>     <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>int</span> k <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; k <span style=color:#f92672>&lt;</span> N; <span style=color:#f92672>++</span>k) {
<span style=color:#ae81ff>140</span>         <span style=color:#a6e22e>if</span>(allowedColorsSize<span style=color:#960050;background-color:#1e0010>\</span>[k<span style=color:#960050;background-color:#1e0010>\</span>] <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) {
<span style=color:#ae81ff>141</span>             printf(<span style=color:#e6db74>&#34;-1</span><span style=color:#ae81ff>\\</span><span style=color:#e6db74>n&#34;</span>);
<span style=color:#ae81ff>142</span>             exit(<span style=color:#ae81ff>0</span>);
<span style=color:#ae81ff>143</span>         }
<span style=color:#ae81ff>144</span>     }
<span style=color:#ae81ff>145</span> }
<span style=color:#ae81ff>146</span> 
<span style=color:#ae81ff>147</span> <span style=color:#75715e>//Hace un ciclo checando el menor color posible por nodo e imprime los colores menores
</span><span style=color:#75715e></span><span style=color:#ae81ff>148</span> <span style=color:#66d9ef>void</span> findSolution() {
<span style=color:#ae81ff>149</span>     colorAssigned<span style=color:#960050;background-color:#1e0010>\</span>[<span style=color:#ae81ff>0</span><span style=color:#960050;background-color:#1e0010>\</span>] <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>;
<span style=color:#ae81ff>150</span>     list<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#f92672>&gt;::</span>iterator it <span style=color:#f92672>=</span> nodesOrder.end();
<span style=color:#ae81ff>151</span>     <span style=color:#66d9ef>do</span> {
<span style=color:#ae81ff>152</span>         it <span style=color:#f92672>--</span>;
<span style=color:#ae81ff>153</span>         <span style=color:#a6e22e>assert</span>(<span style=color:#ae81ff>0</span> <span style=color:#f92672>&lt;=</span> <span style=color:#960050;background-color:#1e0010>\</span><span style=color:#f92672>*</span>it <span style=color:#f92672>&amp;&amp;</span> <span style=color:#960050;background-color:#1e0010>\</span><span style=color:#f92672>*</span>it <span style=color:#f92672>&lt;</span> N);
<span style=color:#ae81ff>154</span>         <span style=color:#66d9ef>int</span> color <span style=color:#f92672>=</span> validColor(<span style=color:#960050;background-color:#1e0010>\</span><span style=color:#f92672>*</span>it);
<span style=color:#ae81ff>155</span>         <span style=color:#a6e22e>if</span>(colorAssigned<span style=color:#960050;background-color:#1e0010>\</span>[parents<span style=color:#960050;background-color:#1e0010>\</span>[<span style=color:#960050;background-color:#1e0010>\</span><span style=color:#f92672>*</span>it<span style=color:#960050;background-color:#1e0010>\</span>]<span style=color:#960050;background-color:#1e0010>\</span>] <span style=color:#f92672>==</span> color) {
<span style=color:#ae81ff>156</span>             color <span style=color:#f92672>=</span> validColor(<span style=color:#960050;background-color:#1e0010>\</span><span style=color:#f92672>*</span>it, color);
<span style=color:#ae81ff>157</span>         }
<span style=color:#ae81ff>158</span>         <span style=color:#a6e22e>assert</span>(<span style=color:#ae81ff>0</span> <span style=color:#f92672>&lt;=</span> color <span style=color:#f92672>&amp;&amp;</span> color <span style=color:#f92672>&lt;</span> M);
<span style=color:#ae81ff>159</span>         colorAssigned<span style=color:#960050;background-color:#1e0010>\</span>[<span style=color:#960050;background-color:#1e0010>\</span><span style=color:#f92672>*</span>it<span style=color:#960050;background-color:#1e0010>\</span>] <span style=color:#f92672>=</span> color;
<span style=color:#ae81ff>160</span>     } <span style=color:#66d9ef>while</span>(it <span style=color:#f92672>!=</span> nodesOrder.begin()) ;
<span style=color:#ae81ff>161</span> 
<span style=color:#ae81ff>162</span>    <span style=color:#66d9ef>for</span>(<span style=color:#66d9ef>int</span> k <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; k <span style=color:#f92672>&lt;</span> N; <span style=color:#f92672>++</span>k) {
<span style=color:#ae81ff>163</span>        <span style=color:#a6e22e>printf</span>(<span style=color:#e6db74>&#34;%d</span><span style=color:#ae81ff>\\</span><span style=color:#e6db74>n&#34;</span>, colorAssigned<span style=color:#960050;background-color:#1e0010>\</span>[k<span style=color:#960050;background-color:#1e0010>\</span>]);
<span style=color:#ae81ff>164</span>    }
<span style=color:#ae81ff>165</span> }
<span style=color:#ae81ff>166</span> 
<span style=color:#ae81ff>167</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
<span style=color:#ae81ff>168</span>     read();
<span style=color:#ae81ff>169</span>     orderNodes();
<span style=color:#ae81ff>170</span>     enforceArc();
<span style=color:#ae81ff>171</span>     findSolution();
<span style=color:#ae81ff>172</span>     <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
<span style=color:#ae81ff>173</span> }

</code></pre></div><ul class=pa0>
<li class=list>
<a href=/tags/etapa-1 class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Etapa 1</a>
</li>
<li class=list>
<a href=/tags/examen-5 class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Examen 5</a>
</li>
<li class=list>
<a href=/tags/soluciones-preselectivo-2013 class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Soluciones Preselectivo 2013</a>
</li>
</ul>
<div class="mt6 instapaper_ignoref">
</div>
</div>
<aside class="w-30-l mt6-l">
<div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
<p class="f5 b mb3">Related</p>
<ul class="pa0 list">
<li class=mb2>
<a href=/solucion-a-metro/>Solución a "Metro"</a>
</li>
<li class=mb2>
<a href=/162/>Solución a "Pulseras"</a>
</li>
<li class=mb2>
<a href=/solucion-a-los-bloques-de-link/>Solución a "Los Bloques de Link"</a>
</li>
<li class=mb2>
<a href=/solucion-a-problema/>Solución a "Problema"</a>
</li>
<li class=mb2>
<a href=/solucion-a-alfiles/>Solución a "Alfiles"</a>
</li>
<li class=mb2>
<a href=/solucion-a-mario-reloaded/>Solución a "Mario Reloaded"</a>
</li>
<li class=mb2>
<a href=/solucion-a-el-collar-de-perlas/>Solución a "El collar de perlas"</a>
</li>
<li class=mb2>
<a href=/solucion-a-teclado-roto/>Solución a "Teclado Roto"</a>
</li>
<li class=mb2>
<a href=/solucion-a-el-artista-lento/>Solución a "El Artista Lento"</a>
</li>
<li class=mb2>
<a href=/engranes-khayyam-solucion-enrique-lira/>Solución a "Engranes"</a>
</li>
<li class=mb2>
<a href=/juego-lento-ethan-jimenez/>Solución a "Juego Lento"</a>
</li>
</ul>
</div>
</aside>
</article>
</main>
<footer class="bg-black bottom-0 w-100 pa3" role=contentinfo>
<div class="flex justify-between">
<a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://blogv2.omegaup.com/>
&copy; omegaUp blog 2022
</a>
<div>
<div class=ananke-socials>
</div></div>
</div>
</footer>
<script type=text/javascript async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type=text/x-mathjax-config>
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['$latex', '$'], ['\\(','\\)']],
      displayMath: [['$$','$$'], ['\[','\]']],
      processEscapes: true,
      processEnvironments: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      ignoreClass: 'gist',
      TeX: {
        equationNumbers: { autoNumber: "AMS" },
        extensions: ["AMSmath.js", "AMSsymbols.js"],
      },
   },
 });
</script>
</body>
</html>